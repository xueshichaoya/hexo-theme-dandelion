<div id="archive">
    <% var year = 0 %>
    <% var itemFirst = true %>
    <% var change = false %>
    <% page.posts.sort('date', 'desc').each(function(post) { %>
      <% var itemYear = date(post.date, 'YYYY') - 0 %>
      <% change = year !== itemYear %>
      <% year = change ? itemYear : year %>
      <% if (change) { %>
        <% if (!(itemFirst)) { %>
          </ul>
        <% } %>
        
        <div class="block-explore-title">
          <h2 class="block-explore-title-header"><%= year %></h2>
        </div>

        <ul class="post-list">
          <li class="post-item">
            <%- partial('_partial/post/date', { post: post, class_name: 'meta' }) %>
            <span><%- partial('_partial/post/title', { post: post, index: true, class_name: '' }) %></span>
          </li>
      <% } else { %>
          <li class="post-item">
            <%- partial('_partial/post/date', { post: post, class_name: 'meta' }) %>
            <span><%- partial('_partial/post/title', { post: post, index: true, class_name: '' }) %></span>
          </li>
      <% } %>
      
      <% itemFirst = false %>
    <% }); %>
     </ul>
  <!--%- partial('_partial/pagination') %-->
</div>
